# 第四章 图像和大型数组类型
## 动态可变的存储
cv::Mat类用于表示任意维度的稠密数组，与之相对的是稀疏数组(spare array,只存储非0数值。
如果数组中0很多，稀疏数组会更节约内存。用例: 统计直方图)
## cv::Mat类N维稠密数组
可以看作是按栅格扫描顺序存储的n维数组。在一维数组中，元素是按顺序排列的(从左往右)。在
二维数组中，数据按行组织，每一行按顺序排列 (从左往右，从上往下)。在三维数组中，所有的
通道都被行填充，每一个通道同样按顺序排列。
所有矩阵都包含有: 一个表示它所包含数组类型的元素flag，一个表示其维度的元素dims，表示
行和列数目的元素rows和cols(在dims大于2的时候无效)，一个指示数据真正存储位置的data指
针，一个表示该内存区域有多少引用的refcount元素(类似于cv::Ptr<>的引用计数器)。
data的结构用step[]描述。
cv::Mat中的数据可以是一个数字，也可以是多个数字，后者被称为"多通道数组"。例如，一个
数组被声明为二维三通道32位浮点型数组，那么数组的元素就是大小位12个字节的32位浮点数据
(单精度浮点数使用32位来存储一个浮点数。一个浮点数 32 bit = 4 byte(字节),三通道即12
个字节)
## 创建一个数组

			cv::Mat m;//实例化变量创建数组，没有大小和数据类型
			m.create(3,10,CV_32FC3); //申请内存区域，指定行数和列数以及数据类型来
			//配置二维数组的规模。数据类型包括指明数据的类型和通道数。CV_32FC3表示
			//一个三通道的32位浮点数据。**CV_{8U,16S,16U,32S,32F,64F}C{1,2,3}**
			m.setTo( cv::Scalar(1.0f, 0.0f, 1.0f) );
			等效于 cv::Mat m( 3,10, cv_32FC3, cv::Scalar(1.0f, 0.0f, 1.0f) );
当我们把一个矩阵n赋值给m时(m=n)。之前的m的数据指针指向的数据实体m将会被释放，与此同
时，m和n共享的内存区域的引用指针会增加一个引用计数，然后m与实体相关的成员将依据新数
据警醒更新(比如行数，列数，数据类型等)。
OpenCV允许定义超过3通道的数据类型，需要调用CV_{8U,16S,32S,32F,64F}C(),例如
CV_8UC(7)。而CV_8UC(3)等效于CV_8UC3。
cv::Mat的构造函数:
* 默认构造函数 cv::Mat
* 指定类型的二维数组 
	* cv::Mat( int rows, int cols, int type );
	* cv::Mat( int rows, int cols, int type, const Scalar&s );
	* cv::Mat( int rows, int cols, int type, void* data, size_t step = AUTO_STEP );
	* cv::Mat( cv::Size sz, int type );
	* cv::Mat( cv::Size sz, int type, const Scalar&s );
	* cv::Mat( cv::Size sz, int type, void* data, size_t step = AUTO_STEP );
* 指定类型的多维数组
	* cv::Mat( int ndims, const int* sizes, int type);
	* cv::Mat( int ndims, const int* sizes, int type, const Scalar&s);
	* cv::Mat( int ndims, const int* sizes, int type, void* data, size_t step = AUTO_STEP);
含有data的直接指定预先存储的数据，该行为不会发生复制而是值创建了一个指向数据的头，含
有Scalar的直接指定初始化值。